echo "Generic Distro-Boot Boot-Script"

# rootfs is always on the next partition
setexpr openwrt_rootpart ${distro_bootpart} + 1

# figure out partition uuid to pass to the kernel as root=
part uuid ${devtype} ${devnum}:${openwrt_rootpart} uuid

# generate bootargs
setenv bootargs ${bootargs} console=${console} root=PARTUUID=${uuid} ro rootwait

# Boot
echo "Booting Linux with ${bootargs}"
load ${devtype} ${devnum}:${distro_bootpart} ${fdt_addr_r} ${fdtfile}
load ${devtype} ${devnum}:${distro_bootpart} ${kernel_addr_r} uImage
bootz ${kernel_addr_r} - ${fdt_addr_r}
